!function(){function i(a,t){function s(e,d){return function(){return e.apply(d,arguments)}}var r;if(t=t||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=t.touchBoundary||10,this.layer=a,this.tapDelay=t.tapDelay||200,this.tapTimeout=t.tapTimeout||700,!i.notNeeded(a)){for(var q=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],p=this,o=0,c=q.length;c>o;o++){p[q[o]]=s(p[q[o]],p)}n&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,u,g){var f=Node.prototype.removeEventListener;"click"===b?f.call(a,b,u.hijacked||u,g):f.call(a,b,u,g)},a.addEventListener=function(b,u,g){var f=Node.prototype.addEventListener;"click"===b?f.call(a,b,u.hijacked||(u.hijacked=function(d){d.propagationStopped||u(d)}),g):f.call(a,b,u,g)}),"function"==typeof a.onclick&&(r=a.onclick,a.addEventListener("click",function(b){r(b)},!1),a.onclick=null)}}var h=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!h,m=/iP(ad|hone|od)/.test(navigator.userAgent)&&!h,l=m&&/OS 4_\d(_\d)?/.test(navigator.userAgent),k=m&&/OS [6-7]_\d/.test(navigator.userAgent),j=navigator.userAgent.indexOf("BB10")>0;i.prototype.needsClick=function(b){switch(b.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(b.disabled){return !0}break;case"input":if(m&&"file"===b.type||b.disabled){return !0}break;case"label":case"iframe":case"video":return !0}return/\bneedsclick\b/.test(b.className)},i.prototype.needsFocus=function(b){switch(b.nodeName.toLowerCase()){case"textarea":return !0;case"select":return !n;case"input":switch(b.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return !1}return !b.disabled&&!b.readOnly;default:return/\bneedsfocus\b/.test(b.className)}},i.prototype.sendClick=function(f,e){var o,g;document.activeElement&&document.activeElement!==f&&document.activeElement.blur(),g=e.changedTouches[0],o=document.createEvent("MouseEvents"),o.initMouseEvent(this.determineEventType(f),!0,!0,window,1,g.screenX,g.screenY,g.clientX,g.clientY,!1,!1,!1,!1,0,null),o.forwardedTouchEvent=!0,f.dispatchEvent(o)},i.prototype.determineEventType=function(b){return n&&"select"===b.tagName.toLowerCase()?"mousedown":"click"},i.prototype.focus=function(d){var c;m&&d.setSelectionRange&&0!==d.type.indexOf("date")&&"time"!==d.type&&"month"!==d.type?(c=d.value.length,d.setSelectionRange(c,c)):d.focus()},i.prototype.updateScrollParent=function(e){var d,f;if(d=e.fastClickScrollParent,!d||!d.contains(e)){f=e;do{if(f.scrollHeight>f.offsetHeight){d=f,e.fastClickScrollParent=f;break}f=f.parentElement}while(f)}d&&(d.fastClickLastScrollTop=d.scrollTop)},i.prototype.getTargetElementFromEventTarget=function(b){return b.nodeType===Node.TEXT_NODE?b.parentNode:b},i.prototype.onTouchStart=function(e){var d,o,g;if(e.targetTouches.length>1){return !0}if(d=this.getTargetElementFromEventTarget(e.target),o=e.targetTouches[0],m){if(g=window.getSelection(),g.rangeCount&&!g.isCollapsed){return !0}if(!l){if(o.identifier&&o.identifier===this.lastTouchIdentifier){return e.preventDefault(),!1}this.lastTouchIdentifier=o.identifier,this.updateScrollParent(d)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=d,this.touchStartX=o.pageX,this.touchStartY=o.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},i.prototype.touchHasMoved=function(e){var d=e.changedTouches[0],f=this.touchBoundary;return Math.abs(d.pageX-this.touchStartX)>f||Math.abs(d.pageY-this.touchStartY)>f?!0:!1},i.prototype.onTouchMove=function(b){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(b.target)||this.touchHasMoved(b))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},i.prototype.findControl=function(b){return void 0!==b.control?b.control:b.htmlFor?document.getElementById(b.htmlFor):b.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},i.prototype.onTouchEnd=function(d){var c,q,p,o,f,e=this.targetElement;if(!this.trackingClick){return !0}if(d.timeStamp-this.lastClickTime<this.tapDelay){return this.cancelNextClick=!0,!0}if(d.timeStamp-this.trackingClickStart>this.tapTimeout){return !0}if(this.cancelNextClick=!1,this.lastClickTime=d.timeStamp,q=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,k&&(f=d.changedTouches[0],e=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||e,e.fastClickScrollParent=this.targetElement.fastClickScrollParent),p=e.tagName.toLowerCase(),"label"===p){if(c=this.findControl(e)){if(this.focus(e),n){return !1}e=c}}else{if(this.needsFocus(e)){return d.timeStamp-q>100||m&&window.top!==window&&"input"===p?(this.targetElement=null,!1):(this.focus(e),this.sendClick(e,d),m&&"select"===p||(this.targetElement=null,d.preventDefault()),!1)}}return m&&!l&&(o=e.fastClickScrollParent,o&&o.fastClickLastScrollTop!==o.scrollTop)?!0:(this.needsClick(e)||(d.preventDefault(),this.sendClick(e,d)),!1)},i.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},i.prototype.onMouse=function(b){return this.targetElement?b.forwardedTouchEvent?!0:b.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(b.stopImmediatePropagation?b.stopImmediatePropagation():b.propagationStopped=!0,b.stopPropagation(),b.preventDefault(),!1):!0:!0},i.prototype.onClick=function(d){var c;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===d.target.type&&0===d.detail?!0:(c=this.onMouse(d),c||(this.targetElement=null),c)},i.prototype.destroy=function(){var b=this.layer;n&&(b.removeEventListener("mouseover",this.onMouse,!0),b.removeEventListener("mousedown",this.onMouse,!0),b.removeEventListener("mouseup",this.onMouse,!0)),b.removeEventListener("click",this.onClick,!0),b.removeEventListener("touchstart",this.onTouchStart,!1),b.removeEventListener("touchmove",this.onTouchMove,!1),b.removeEventListener("touchend",this.onTouchEnd,!1),b.removeEventListener("touchcancel",this.onTouchCancel,!1)},i.notNeeded=function(g){var c,q,p,o;if("undefined"==typeof window.ontouchstart){return !0}if(q=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n){return !0}if(c=document.querySelector("meta[name=viewport]")){if(-1!==c.content.indexOf("user-scalable=no")){return !0}if(q>31&&document.documentElement.scrollWidth<=window.outerWidth){return !0}}}if(j&&(p=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),p[1]>=10&&p[2]>=3&&(c=document.querySelector("meta[name=viewport]")))){if(-1!==c.content.indexOf("user-scalable=no")){return !0}if(document.documentElement.scrollWidth<=window.outerWidth){return !0}}return"none"===g.style.msTouchAction||"manipulation"===g.style.touchAction?!0:(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],o>=27&&(c=document.querySelector("meta[name=viewport]"),c&&(-1!==c.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===g.style.touchAction||"manipulation"===g.style.touchAction?!0:!1)},i.attach=function(a,d){return new i(a,d)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return i}):"undefined"!=typeof module&&module.exports?(module.exports=i.attach,module.exports.FastClick=i):window.FastClick=i}();